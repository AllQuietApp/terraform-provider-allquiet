---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "allquiet_routing Resource - allquiet"
subcategory: ""
description: |-
  The routing resource allows you to define routing rules for incidents based on various conditions and actions.
---

# allquiet_routing (Resource)

The routing resource allows you to define routing rules for incidents based on various conditions and actions.

## Example Usage

```terraform
resource "allquiet_team" "root" {
  display_name = "Root"
}

resource "allquiet_team" "pres_sales" {
  display_name = "Pre Sales"
}

resource "allquiet_team" "after_sales" {
  display_name = "After Sales"
}

resource "allquiet_integration" "datadog" {
  team_id      = allquiet_team.root.id
  display_name = "Datadog"
  type         = "Datadog"
}

resource "allquiet_integration" "custom_webhook" {
  team_id      = allquiet_team.root.id
  display_name = "Custom Webhook"
  type         = "Webhook"
}


resource "allquiet_outbound_integration" "slack" {
  team_id      = allquiet_team.root.id
  display_name = "Slack"
  type         = "Slack"
}

resource "allquiet_outbound_integration" "notion" {
  team_id      = allquiet_team.root.id
  display_name = "Notion"
  type         = "Notion"
}

resource "allquiet_service" "pre_sales" {
  display_name = "Pre Sales"
  public_title = "Pre Sales"
}

resource "allquiet_routing" "example_1" {
  team_id      = allquiet_team.root.id
  display_name = "Route to specific team based on attribute"
  rules = [
    {
      conditions = {
        attributes = [
          {
            name     = "Service",
            operator = "=",
            value    = "Pre Sales"
          }
        ]
      },
      actions = {
        assign_to_teams = [allquiet_team.pres_sales.id]
      }
    },

    {
      conditions = {
        attributes = [
          {
            name     = "Service",
            operator = "=",
            value    = "After Sales"
          }
        ]
      },
      actions = {
        assign_to_teams = [allquiet_team.after_sales.id]
      }
    }
  ]
}

resource "allquiet_routing" "example_2" {
  team_id      = allquiet_team.root.id
  display_name = "Mute Slack Outbound Integration when Minor"
  rules = [
    {
      conditions = {
        severities = ["Minor"]
      },
      channels = {
        outbound_integrations       = [allquiet_outbound_integration.slack.id]
        outbound_integrations_muted = true
      },
    },
  ]
}

resource "allquiet_routing" "example_3" {
  team_id      = allquiet_team.root.id
  display_name = "Auto Resolve non Critical incidents from Custom Webhook"
  rules = [
    {
      conditions = {
        severities   = ["Minor", "Warning"]
        integrations = [allquiet_integration.custom_webhook.id]
      },
      actions = {
        add_interaction = "Resolved"
      }
    },
  ]
}

resource "allquiet_routing" "example_4" {
  team_id      = allquiet_team.root.id
  display_name = "Auto Resolve non Critical incidents from Custom Webhook after 10 minutes"
  rules = [
    {
      conditions = {
        severities   = ["Minor", "Warning"]
        integrations = [allquiet_integration.custom_webhook.id]
      },
      actions = {
        add_interaction          = "Resolved"
        delay_actions_in_minutes = 10
      }
    },
  ]
}

resource "allquiet_routing" "example_5" {
  team_id      = allquiet_team.root.id
  display_name = "Auto Resolve non Critical incidents from Custom Webhook but only in the period from 2025-01-16T22:07:03Z to 2025-01-19T00:00:00Z"
  rules = [
    {
      conditions = {
        severities = ["Minor", "Warning"],
        date_restriction = {
          from  = "2025-01-16T22:07:03Z",
          until = "2025-01-19T00:00:00Z"
        }
      },
      actions = {
        add_interaction = "Resolved"
      }
    },
  ]
}

resource "allquiet_routing" "example_6" {
  team_id      = allquiet_team.root.id
  display_name = "Auto Archive incidents Monday Mornings from 08 until 10"
  rules = [
    {
      conditions = {
        schedule = {
          days_of_week = ["mon"],
          after        = "08:00",
          before       = "10:00"
        }
      },
      actions = {
        add_interaction = "Archived"
      }
    },
  ]
}

resource "allquiet_routing" "example_7" {
  team_id      = allquiet_team.root.id
  display_name = "Auto Forward Critical incidents to Notion"
  rules = [
    {
      conditions = {
        severities = ["Critical"]
      },
      actions = {
        add_interaction                  = "Forwarded"
        forward_to_outbound_integrations = [allquiet_outbound_integration.notion.id]
      }
    }
  ]
}

resource "allquiet_routing" "example_8" {
  team_id      = allquiet_team.root.id
  display_name = "Auto Affect incidents with 'Project' attribute 'Pre Sales' to service 'Pre Sales'"
  rules = [
    {
      conditions = {
        attributes = [
          {
            name     = "Project",
            operator = "=",
            value    = "Pre Sales"
          }
        ]
      },
      actions = {
        add_interaction  = "Affects"
        affects_services = [allquiet_service.pre_sales.id]
      }
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `display_name` (String) The display name of the routing
- `team_id` (String) The team id of the routing

### Optional

- `rules` (Attributes List) (see [below for nested schema](#nestedatt--rules))

### Read-Only

- `id` (String) Id

<a id="nestedatt--rules"></a>
### Nested Schema for `rules`

Required:

- `conditions` (Attributes) Settings for the schedule (see [below for nested schema](#nestedatt--rules--conditions))

Optional:

- `actions` (Attributes) Settings for the schedule (see [below for nested schema](#nestedatt--rules--actions))
- `channels` (Attributes) Settings for the schedule (see [below for nested schema](#nestedatt--rules--channels))

<a id="nestedatt--rules--conditions"></a>
### Nested Schema for `rules.conditions`

Optional:

- `attributes` (Attributes List) (see [below for nested schema](#nestedatt--rules--conditions--attributes))
- `date_restriction` (Attributes) (see [below for nested schema](#nestedatt--rules--conditions--date_restriction))
- `integrations` (List of String) Integration IDs
- `intents` (List of String) Intents. Possible values are: Resolved, Investigated, Escalated, Commented, Unresolved, Assigned, Affects, Forwarded, Archived, Unarchived, Created, Deleted, Updated
- `schedule` (Attributes) (see [below for nested schema](#nestedatt--rules--conditions--schedule))
- `severities` (List of String) Severeties. Possible values are: Critical, Warning, Minor
- `statuses` (List of String) Statuses. Possible values are: Open, Resolved

<a id="nestedatt--rules--conditions--attributes"></a>
### Nested Schema for `rules.conditions.attributes`

Required:

- `name` (String) The name of the attribute
- `operator` (String) The operator

Optional:

- `value` (String) The value of the attribute to match with the operator against


<a id="nestedatt--rules--conditions--date_restriction"></a>
### Nested Schema for `rules.conditions.date_restriction`

Optional:

- `from` (String) Start date for the routing rule (RFC3339 format)
- `until` (String) End date for the routing rule (RFC3339 format)


<a id="nestedatt--rules--conditions--schedule"></a>
### Nested Schema for `rules.conditions.schedule`

Optional:

- `after` (String) Time after which the rule is active (HH:mm format)
- `before` (String) Time before which the rule is active (HH:mm format)
- `days_of_week` (List of String) Days of the week when the rule is active. Possible values are: sun, mon, tue, wed, thu, fri, sat



<a id="nestedatt--rules--actions"></a>
### Nested Schema for `rules.actions`

Optional:

- `add_interaction` (String) Will add an interaction. For instance, you can auto resolve an incident by adding an interaction of intent 'Resolved'. Possible values are: Resolved, Investigated, Escalated, Commented, Unresolved, Assigned, Affects, Forwarded, Archived, Unarchived, Created, Deleted, Updated
- `affects_services` (List of String) Will affect the specified services. Only with add_interaction 'Affects'.
- `assign_to_teams` (List of String) Will assign the incident to the specified teams.
- `change_severity` (String) Will change the severity of the incident
- `delay_actions_in_minutes` (Number) Delay actions in minutes
- `discard` (Boolean) If true will discard and delete the incident
- `forward_to_outbound_integrations` (List of String) Will forward to the specified outbound integrations. Only with add_interaction 'Forwarded'.
- `rule_flow_control` (String) If 'Skip' will not evaluate further rules


<a id="nestedatt--rules--channels"></a>
### Nested Schema for `rules.channels`

Optional:

- `notification_channels` (List of String) Notification channels
- `notification_channels_muted` (Boolean) If true will mute the notification channels
- `outbound_integrations` (List of String) Outbound integrations
- `outbound_integrations_muted` (Boolean) If true will mute the outbound integrations
